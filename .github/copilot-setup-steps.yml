# Copilot Coding Agent â€” Setup Steps
# These steps run BEFORE the network firewall engages, allowing
# dependency downloads, binary installations, and other setup.
# See: https://docs.github.com/en/copilot/using-github-copilot/using-copilot-coding-agent
#
# Generated by MaintainabilityAI VS Code Extension

steps:
  - uses: actions/setup-node@v4
    with:
      node-version: 20
  - name: Install dependencies
    run: if [ -f package.json ]; then npm ci || npm install; fi
  - name: Pre-cache MongoDB binary (for MongoMemoryServer)
    run: |
      if grep -q "mongodb-memory-server" package.json 2>/dev/null; then
        node -e "const { MongoBinary } = require('mongodb-memory-server-core'); MongoBinary.getPath({}).then(p => console.log('MongoDB binary cached at:', p)).catch(e => console.error('Download failed:', e.message))"
      fi
    continue-on-error: true

